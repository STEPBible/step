<!DOCTYPE html>
<!-- Handles the genealogy display.  A lot more information in the Javascript comments below. -->
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Genealogical information</title>
    <link rel="shortcut icon" href="/images/step-favicon.ico"/>
    <link href="/css/bootstrap.css" rel="stylesheet" media="screen"/>
    <link href="/css/bootstrap-theme.min.css" rel="stylesheet" media="screen"/>
    <link href="/css/select2.css" rel="stylesheet" media="screen"/>
    <link href="/css/select2-bootstrap.css" rel="stylesheet" media="screen"/>
    <link href="/scss/step-template.css" rel="stylesheet" media="screen"/>
    <script src="/international/en.js" type="text/javascript"></script>
    <script src="/libs/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="/libs/underscore-min.js" type="text/javascript"></script>
    <script src="/libs/bootstrap.min.js" type="text/javascript"></script>
    <script src="/libs/backbone.js" type="text/javascript"></script>
    <script src="/libs/backbone.localStorage.js" type="text/javascript"></script>
    <script src="/js/step_constants.js" type="text/javascript"></script>
    <script src="/js/passage_selection.js" type="text/javascript"></script>
    <script src="/js/search_selection.js" type="text/javascript"></script>
    <script src="/js/backbone/models/model_settings.js" type="text/javascript"></script>

    <script src="/libs/d3.v7.min.js" type="text/javascript"></script>
    <link href="/css/modalDialog.css" rel="stylesheet" media="screen"/>
    <script src="/js/step.multiframeController.js" type="text/javascript"></script>
    <script src="/js/step.tableWithSearchBoxHandler.js" type="text/javascript"></script>

  <style>
    :root {
        --clrHighlight: #17758F;
        --clrHighlightBg: #17758F;
        --clrStrongText: #447888;
        --clrLexiconFocusBG: #c8d8dc;
        --clrRelatedWordBg: #b2e5f3;
        --clrBackground: #ffffff;
        --clrText: #5d5d5d;
        --clr2ndHover: #d3d3d3;
	--simulated-sidebar-width: 100%;
	--height-of-info-box: 200px;
	--clrInfoAndPopUpBackground: rgb(255, 255, 192);

	--clrMan: blue;
	--clrWomand: salmon;
	--popUpOverlayZIndex: 100;
	--popUpZIndex: 101;
    }
    
    /* ----- Basic formatting ----- */
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }

    .clickable {
        color: #17758f;
        cursor: pointer;
    }

    .draggableContainer {
	position: absolute;
	box-sizing: border-box;
    }

    .draggableHeader {
	cursor: move;
    }
    
    .noDisplay {
	display: none;
    }



    /* ----- Family tree ----- */
    .arrowhead {
	fill: black !important;
	stroke: none;
    }

    .node circle { fill: #69b3a2; stroke: #333; stroke-width: 2px; }

    .link { fill: none; stroke: #ccc; stroke-width: 2px; }

    .linkHighlight-jesusLine {
	stroke: red;
    }
    
    .linkHighlight-selectedLine {
	stroke: blue;
    }

    .linkHighlight-jesusLine.linkHighlight-selectedLine {
	stroke: purple;
    }
    
    .linkHighlight-femaleLineOverlay {
	stroke-dasharray: 5, 5;
    }
    
    .link:hover { stroke-width: 3px; stroke: #00FF00 !important; }

    text.highlightSelectedIndividual {
	fill: red;
	font-weight: bold;
    }
      
    tspan.retainDefaultAppearance { /* Avoids the bishop's mitre icon from turning red when highlighted. */
	fill: black;
	font-weight: normal;
    }
      
    .highlightSiblings {
	animation: highlightSiblings 1s infinite; /* 2 seconds duration (1s on, 1s off), infinite loop */
    }

    @keyframes highlightSiblings {
	  0% { fill: black; }
	 50% { fill: red; font-weight: bold; }
	100% { fill: black; }
    }

    .highlightChildren {
	animation: highlightChildren 1s infinite;
    }

    @keyframes highlightChildren {
	  0% { fill: black; }
	 50% { fill: blue; font-weight: bold; }
	100% { fill: black; }
      }



    /* ----- Info-box (the yellow box at the top of the screen) ----- */
    #info-box {
        height: var(--height-of-info-box);
        width: var(--simulated-sidebar-width);
        background: var(--clrInfoAndPopUpBackground);
        color: #333;
	font-size: small;
        border: 1px solid #ccc;
        box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        text-align: left;
	overflow-y: auto;
        z-index: 1000;
	margin-bottom: 10px;
      }
      
    li { margin-bottom: 12px; }
    
    ul {
	padding-left: 20px; /* Adjust this if needed */
	list-style-position: outside; /* Ensures bullets align with the left margin */
    }

    .simulatedLink { text-decoration: underline; cursor: pointer; color: blue } /* Used on scripture references within the descriptive text in the info box. */
	

    .modalDialogRight {
	top: 2vh;
	right: 2vw !important;
	left: auto !important;
    }

	

    /* ----- Buttons ----- */
    .importantTreeButton {
	width: 30px;
	height: 30px;
    }
    
    .importantTreeButtonContainer {
	display: inline-flex;
	align-items: center;
	cursor: pointer;
	user-select: none;
    }
    
    .buttonContainerTopLeft {
        position: absolute;
        top: 10px;
        left: 10px;
        display: flex;
        gap: 5px;
	z-index: 2;
    }

    .buttonContainerTopRight {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        gap: 5px;
	z-index: 2;
    }

    .btn {
        width: 45px;
        height: 45px;
        border: none;
        border-radius: 5px;
        font-size: 22px;
        color: white;
        cursor: pointer;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        
        /* Beveled effect */
        box-shadow: inset 3px 3px 5px rgba(255, 255, 255, 0.6), 
                    inset -3px -3px 5px rgba(0, 0, 0, 0.6),
                    2px 2px 5px rgba(0, 0, 0, 0.4);
    }

    .grey  { background: linear-gradient(to bottom, #c0c0c0, #808080); }
    .green { background: linear-gradient(to bottom, #00cc00, #006600); }
    .blue  { background: linear-gradient(to bottom, #0099ff, #004080); }
    .pink  { background: linear-gradient(to bottom, #ff66b2, #cc3366); }
    .lilac { background: linear-gradient(to bottom, #c8a2c8, #aa7fbb); }
        
    .disabled { display: none }

    .disabledx { /* Used for disabled buttons.  I don't want to lose this, but actually just hiding them seems better. */
        background: linear-gradient(to bottom, #e0e0e0, #a0a0a0) !important;
        cursor: not-allowed;
        opacity: 0.5;
        box-shadow: inset 2px 2px 3px rgba(255, 255, 255, 0.4), 
                    inset -2px -2px 3px rgba(0, 0, 0, 0.4),
                    1px 1px 3px rgba(0, 0, 0, 0.2);
    }

    .btn:active { /* Button-pressed state. */
        box-shadow: inset -3px -3px 5px rgba(255, 255, 255, 0.6), 
                    inset 3px 3px 5px rgba(0, 0, 0, 0.6);
	transform: translateY(2px);
    }
    

    /* ----- 3D checkboxes ----- */
    input[type="checkbox"] {
	appearance: none; /* Remove default styles */
	width: 20px;
	height: 20px;
	background: linear-gradient(to bottom, #fff, #ccc);
	border: 2px solid #888;
	border-radius: 4px;
	box-shadow: inset -2px -2px 3px rgba(255, 255, 255, 0.6), 
		    inset 2px 2px 3px rgba(0, 0, 0, 0.3);
	cursor: pointer;
	position: relative;
    }

    /* Checkmark */
    input[type="checkbox"]:checked::before {
	content: "✔";
	font-size: 16px;
	font-weight: bold;
	color: #333;
	position: absolute;
	left: 3px;
	top: -1px;
    }

    /* Clicked effect */
    input[type="checkbox"]:active {
	box-shadow: inset 2px 2px 3px rgba(255, 255, 255, 0.6), 
		    inset -2px -2px 3px rgba(0, 0, 0, 0.3);
    }

    .tb_col {
        padding: 4px;
        border: 1px solid #ccc;
        word-wrap: break-word;
    }

    tr {
	width: 100% !important;
    }





    /* ----- Descendant table ----- */
    #descendantTableContainer {
        overflow-y: auto;
    }





    /* ----- TV-remote-style scroll ring ----- */
    #scrollRing {
	position: relative;
	width: 60px;
	height: 60px;
	background: radial-gradient(circle, #555 40%, #222 60%); /* Looks like a ring */
	border-radius: 50%;
	display: flex;
	justify-content: center;
	align-items: center;
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
	z-index:10;
    }

    #scrollRing button {
	position: absolute;
	width: 20px;
	height: 20px;
	background-color: rgba(255, 255, 255, 0.0); /* Semi-transparent */
	border: none;
	cursor: pointer;
	border-radius: 50%; /* Makes them circular */
	transition: background 0.2s;
	opacity: 0.8;
	display: flex;
	justify-content: center;
	align-items: center;
    }

    /* Positioning the buttons correctly */
    #scrollUpButton { top: 5px; left: 50%; transform: translateX(-50%); }
    #scrollDownButton { bottom: 5px; left: 50%; transform: translateX(-50%); }
    #scrollLeftButton { left: 5px; top: 50%; transform: translateY(-50%); }
    #scrollRightButton { right: 5px; top: 50%; transform: translateY(-50%); }

    /* Adding visible arrows inside the buttons */
    #scrollUpButton::before { content: "▲"; font-size: 16px; color: white; }
    #scrollDownButton::before { content: "▼"; font-size: 16px; color: white; }
    #scrollLeftButton::before { content: "◄"; font-size: 16px; color: white; }
    #scrollRightButton::before { content: "►"; font-size: 16px; color: white; }

    /* Hover effect */
    #scrollRing button:hover {
	background-color: rgba(255, 255, 255, 0.5);
    }

    .man { fill: var(--clrMan); }
    .woman { fill: var(--clrWomand); }

    .manSpouse { fill: gray; }
    .womanSpouse { fill: gray; }


    /*--- Miscellaneous --- */
    .helpImage {
	width: 100%;
	max-width: min(40em, 80vh);
	border: 1px solid black;
    }

  </style>
</head>

<body style='margin:0; background-color: white; display:flex; flex-direction: column; height:100vh; width:100vw'>
  <div id='popUpOverlay' style='position:absolute; top:0; left:0; width:100%; height:100%; background:none; display:none; z-index:var(--popUpOverlayZIndex);'
       onclick='PopUpHandler.clickHandler()'>
  </div>

  <div id='header'>
    <h2 id='pageTitle' style='display:none'>Genealogical information</h2>
    <div id='info-box'><div id='info-box-content' style='padding:10px'></div></div>
  </div> <!-- #header -->

  

  <!-- Buttons -->
  <div style='position:relative; display:flex; flex-direction: column; flex-grow:1; background: none;'>
    <div class='buttonContainerTopLeft'>
      <button class='btn blue'   title='Include father' id='fatherButton' style='font-weight:bold' onclick='PresentationHandler.changeRootToFather()'>&#11014;</button>
      <button class='btn pink'   title='Include mother' id='motherButton' style='font-weight:bold' onclick='PresentationHandler.changeRootToMother()'>&#11014;</button>

      <div id="scrollRing">
	<button id="scrollUpButton"></button>
	<button id="scrollDownButton"></button>
	<button id="scrollLeftButton"></button>
	<button id="scrollRightButton"></button>
      </div>
    </div>

    <div class='buttonContainerTopRight'>
      <button class='btn lilac'  title='Change layout' onclick='ControlsHandler.showMainMenu()' id='mainMenuButton'>&#x2630;</button>
      <button class='btn green'  title='Help' onclick='ControlsHandler.showHelpMenu()'>?</button>
    </div>

    <div id='svgWrapper' style='flex-grow:1; overflow:hidden; width:100%; background: none; border: 1px solid #ccc;'>
      <svg style='flex-grow:1; width: 100%; height: 100%; cursor: grab; background-color: none;'>
	<style>
	  .bigIcon { font-size:x-large; }
	</style>

	<pattern id="redAndBlueDots" width="10" height="10" patternUnits="userSpaceOnUse">
	  <circle cx="2.5" cy="2.5" r="2.5" fill="red" />
	  <circle cx="7.5" cy="2.5" r="2.5" fill="blue" />
	</pattern>

      </svg>
    </div>
  </div>


  <!-- Help modal -->
  <div class='modalDialog draggableContainer' id='help' style='max-width:min(90vh, 50em)'>
    <div class='modalDialogHeader draggableHeader' style='background: rgb(198, 89, 17)'>
      About the genealogy information <button class='modalDialogCloseBtn' onclick='document.getElementById("help").style.display = "none";'>✖</button>
    </div>

    <div class='modalDialogBody' style='background:rgb(248, 203, 173)'>
      <h4>Icons &mdash; Quick reference</h4>
      <p>Icons reflect certain significant roles, as follows:</p>
      <table>
	<tr>
	  <td style='padding-right: 100px'>
	    <span style='font-size:x-large'>&#x265D;</span>: A high priest.
	  </td>
	  <td>
	    <span style='font-size:x-large'>&#x1F451;&#x1F42B;</span>: A pharoah.
	  </td>
	</tr>

        <tr>
	  <td style='padding-right: 100px'>
	    <span style='font-size:x-large'>&#x1F64F;</span>: A priest.
	  </td>
	  <td>
	    <span style='font-size:x-large'>&#x1F3A4;&#x1F3B5;</span>: A singer.
	  </td>
	</tr>

        <tr>
	  <td style='padding-right: 100px'>
	    <span style='font-size:x-large'>&#x2696;</span>: A judge.
	  </td>
	  <td>
	    <span style='font-size:x-large'>&#x1F5E3;&#x1F30D;</span>: An apostle.
	  </td>
	</tr>
	
        <tr>
	  <td style='padding-right: 100px'>
	    <span style='font-size:x-large'>&#x1F451;</span>: Royalty.</td>
	  </td>
	  <td>
	    <span style='font-size:x-large'>&#x270D;</span>: An official.
	  </td>
	</tr>
	
	<tr>
	  <td style='padding-right: 100px'>
	    <span style='font-size:x-large'>&#x1F54A;</span>: A prophet.</td>
	  <td>
	    <span style='font-size:x-large'>&#x1F3DB;</span>: A senior official.
	  </td>
	</tr>
	
	<tr>
	  <td>
	    <span style='font-size:x-large'>&#x1F465;</span>: A group.
	  <td>
	  </td>
	</tr>
      </table>
      <p>&nbsp;</p>
      <p>&nbsp;</p>


      <h4>Overview</h4>
        <p>On a wide screen, you see a screen layout as below.  (On a small screen, you get the same information, but the vaious numbered areas are split across separate tabs.)</p>
        <p style='text-align:center'><img src='../images/genealogyFullScreen.jpg' alt='Widescreen layout' class='helpImage'></p>
	<p>Area <b>1</b> lists all of the people mentioned in the Bible.  You can choose a person of interest from here.</p>
	<p>Area <b>2</b> shows all of the scripture references where this person is mentioned.</p>
	<p>Area <b>3</b> gives detailed information about the person and about people who are related to them.</p>
        <p>Area <b>4</b> shows a family tree.</p>
	<br>
        <p>You can change the current person by clicking on an entry in area 1, by clicking on any link in area 3, or be clicking on someone who appears on the family tree.
           When you do this, all four areas are updated accordingly.  More details about each of these appear in the next sections.</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>


      <h4>Navigating using the full list of people</h4>
        <p>Here is a close-up of the full list of people (area 1 in the earlier picture:</p>
        <p style='text-align:center'><img src='../images/genealogyPeopleIndex.jpg' alt='People list' class='helpImage'></p>
        <p>You can choose a person by scrolling to the appropriate entry i the table, or by typing the start of their name into the search box.  If someone is known by more than
	   one name, you can use any of their names.  (Note that the spellings are those which appear in the English Standard Version of the Bible.</p>
	<p>Once you have chosen someone, all of the areaas of the screen are updated accordingly.</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>


      <h4>Navigating using the detailed biographical information</h4>
        <p>Here is a close-up of the detailed biographical information for a person (area 3 in the earlier picture):</p>
        <p style='text-align:center'><img src='../images/genealogyDetailBox.jpg' alt='People list' class='helpImage'></p>
        <p>If something here looks like a link, it is one.  If the link is a person&rapos;s name, that person will be selected, and all areas of the screen will be updated accordingly.</p>
	<p>If the link is a scripture reference, area 2 of the screen will be updated to hold that reference.</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>


      <h4>Navigating using the family tree</h4>
        <p>Here is a close-up of a family tree (area 4 of the earlier picture):</p>
        <p style='text-align:center'><img src='../images/genealogyFamilyTree.jpg' alt='Family tree' class='helpImage'></p>
          You can move to see other parts of the family tree by dragging the tree with the mouse.  Alternatively, you can use the <img src='../images/genealogyTvRemote.png' alt='TV remote button' width='25px'>
	  button to move more quickly.
        </p>

        <p>
          You can also resize the family tree using the scroll wheel on the mouse (pinch and stretch on a touch screen).  If you do this, the whole tree is scaled, including the text nodes.
	  This is easy to to, but may sometimes make it difficult to read them.  There are menu options which can alter the layout without changing the text size.  We look at these shortly.
        </p>
        <table>
	  <tr>
	    <td style='padding-right: 20px'><img src='../images/genealogyChangeSelection.jpg' alt='Selecting a node' width='100px' style='border: 1px solid black'></td>
	    <td>Note on the picture above that one person is highlighted in red.  This is the selected person &mdash the one whose details are displayed on the rest of the screen.
	        You can change the selected person by clicking on another person in the family tree.  Changing the selected person does not alter the content of the family tree.</td>
	  </tr>
	  <tr style='height:10px'><td colspan="2"></td></tr>
	  <tr style='bottom-margin:10px'>
	    <td style='padding-right: 20px;'><img src='../images/genealogyParentButton.png' alt='Moving to a parent' width='50px'></td>
	    <td>Sometimes an up-arrow button appears at the top left of the screen.  If the father of the person at the top of the family tree is known, you will see a blue button.
	        If the mother is known, you'll see a pink button.  If both parents are known, you will see both.  Clicking one of these buttons alters the display so that the parent
	        appears at the top, and the parent becomes the selected person.</td>
	    </tr>
        </table>
        <p>&nbsp;</p>
        <p>&nbsp;</p>


       <h4>The main menu</h4>
        <p>The <img src='../images/genealogyMenuButton.png' alt='Menu button' width='25px'> button displays a menu which lets you display certain built-in family trees (the green buttons below).</p>
        <p>The menu also contains sliders which let you change the horizontal and vertical spacing of the family tree without altering the size of the text; and a slider which lets you control how
	  many generations of the family tree are displayed when you next change the tree.  And there is also a tick box which highights the siblings and children of the selected person.  This may be
	  useful if you cannot see all of them on the screen at once.
	</p>
	<p style='text-align:center'><img src='../images/genealogyMenu.png' alt='Menu' class='helpImage'></p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>

	
      <h4>The right-click menu</h4>
        <p>Right-clicking on a person selects them and shows a menu (long press on a touch screen).<p>
        <p>If the person has descendants, you can turn on and off the display of their descendants.</p>
        <p>You can also turn off the family tree below the person if the screen is becoming too cluttered.</p>
	<p>And the menu lets you extend the family tree to a selected descendant of the person.</li>
	<p style='text-align:center'><img src='../images/genealogyRightMouseButtonMenu.png' alt='Menu' class='helpImage'></p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>


      <h4>Highlighting</h4>
        <p>If the family line for Jesus overlaps with the family tree being displayed, the family line for Jesus is highlighted in <span style='color:red'>red</span>:</p>
	<p style='text-align:center'><img src='../images/genealogyMessianicHighlighting.jpg' alt='Messianic line highlighting' class='helpImage'></p>
	<p>In ancient times, particular emphasis was given to the male line.  We reflect this by showing the line as solid.  The female line is shown dotted.  Note that there may be more
	   than one female line, as in the example above, to account for all of the various parents / grandparents / great grandparents etc.</p>
	<br>
	<p>If you select a person, the line from the person at the top of the screen to the selected person is highlighted in blue.</p>
	<p style='text-align:center'><img src='../images/genealogySelectedHighlighting.jpg' alt='Highlighting the selected person' class='helpImage'></p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>


      <h4>Things to be aware of</h4>
      <ul>
	<li>The names here are the ones used in the English Standard Version of the Bible (ESV).</li>
	<li>In some places, names include a scripture reference to help distinguish different people with the same name.  The reference gives the first verse where the person is mentioned.</li>
	<li>Don&rsquo;t forget that different people may have the same name, and the same person may have more than one name (Abram and Abraham for instance).  This can be confusing sometimes.</li>
	<li>In some cases, we give information about the number of generations after Adam to the given person, or the number of generations before Jesus.  These numbers are approximate:
	    in the original texts, phrases like &lsquo;son of&rsquo; sometimes means not &lsquo;immediate child&rsquo; but &lsquo;descendant of&rsquo;, so it is not always clear how many generations are involved.</li>
	<li>When the line of descendant to Jesus or some other person is being highlighted, don&rsquo;t be surprised if more than one line is displayed.  Where we have details about both parents, you will
	    certainly get at least two lines, one for the mother and one for the father.  And where there are shared ancestors things can get even more complicated than that.</li>
      </ul>
    </div> <!-- modalDialogBody -->
  </div> <!-- #helpModal -->



  <!-- Main menu modal -->
  <div class='modalDialog draggableContainer' id='mainMenu' style='z-index:var(--popUpZIndex);'>
    <div class='modalDialogHeader draggableHeader' style='background:#aa7fbb'>Built-in family trees, layout etc<button class='modalDialogCloseBtn' onclick='ControlsHandler.hideMainMenu()'>✖</button></div>

    <div class='modalDialogBody' style='background:#fad4fa'>
      <h4>Important family trees</h4>
      <div id='importantTreesContainer' style='height:160px; overflow-y: auto'>
	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeAdamToSonsOfNoah()'>
	  <button class='green importantTreeButton' title="Adam to Noah's sons"></button>
	  <span>&nbsp;Adam to Noah&rsquo;s sons</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeNoahToAbraham()'>
	  <button class='green importantTreeButton' title='Noah to Abraham'></button>
	  <span>&nbsp;Noah to Abraham</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeTerahAbrahamAndIsrael()'>
	  <button class='green importantTreeButton' title='Terah, Abraham and Israel'></button>
	  <span>&nbsp;Terah, Abraham and Israel</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeIsaacIsraelAndTheTwelveTribes()'>
	  <button class='green importantTreeButton' title='Isaac, Israel and the twelve tribes'></button>
	  <span>&nbsp;Isaac, Israel and the twelve tribes</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeAmramMosesAndAaron()'>
	  <button class='green importantTreeButton' title='Moses and Aaron, from Amram'></button>
	  <span>&nbsp;Moses and Aaron, from Amram</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeJudahSelectedDescendants()'>
	  <button class='green importantTreeButton' title='Judah'></button>
	  <span>&nbsp;Judah</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeSaul()'>
	  <button class='green importantTreeButton' title='Saul'></button>
	  <span>&nbsp;Saul</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeDavid()'>
	  <button class='green importantTreeButton' title='David (starting at Boaz and Ruth)'></button>
	  <span>&nbsp;David (starting at Boaz and Ruth)</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeMary()'>
	  <button class='green importantTreeButton' title='Mary and adjacent generations'></button>
	  <span>&nbsp;Mary and adjacent generations</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeAdamToJesus()'>
	  <button class='green importantTreeButton' title='Jesus, male line from Adam'></button>
	  <span>&nbsp;Jesus, male line from Adam</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeRahabToJesus()'>
	  <button class='green importantTreeButton' title='Jesus from Rahab'></button>
	  <span>&nbsp;Jesus from Rahab</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeOriginOfNations()'>
	  <button class='green importantTreeButton' title='Origin of nations'></button>
	  <span>&nbsp;Origin of nations</span>
	</div><br>
	
	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeHighPriests()'>
	  <button class='green importantTreeButton' title='High priests'></button>
	  <span>&nbsp;High priests</span>
	</div><br>

	<div class='importantTreeButtonContainer' onclick='PresentationHandler.showTreeRoyalFamily()'>
	  <button class='green importantTreeButton' title='Royal family'></button>
	  <span>&nbsp;Royal family</span>
	</div>
      </div>

      <hr style='border: 2px solid black;'>
      <h4>Layout</h4>
      <div>Horizontal spacing:</div>
      <div style='display: flex; align-items: center;'>
	<input type='range' title='Controls the spacing between people at the same level' id='horizontalSpacingSlider' min='-2' max='10' value='0'>
      </div>
      
      <br>
      
      <div>Vertical spacing:</div>
      <div style='display: flex; align-items: center;'>
	<input type='range' title='Controls the spacing between generations' id='verticalSpacingSlider' min='-6' max='10' value='0'>
      </div>
      
      <br>
      
      <div>Generations added at one go (takes effect only when the family tree is next updated):<span id='numberOfGenerationsLabel' style='font-weight:bold;font-size:large'>5</span></div>
      <div style='display: flex; align-items: center;'>
	<input id='numberOfGenerationsSlider' type='range' title='Controls the number of generations added to the family tree each time it is expanded' id='numberOfGenerationsSlider' min='3' max='10' value='5'>
      </div>
      
      <br>
      
      <input type='checkbox' id='highlightRelations' title='Highlight siblings and children of selected person' onchange='PresentationHandler.changeRelationsHighlighting(this.checked)'>
      <label for='highlightRelations'>Highlight <span style='color:red'>siblings</span> and <span style='color:blue'>children</span> of selected person.</label>
    </div>
  </div>
  <!-- Main menu modal -->
  


  <!-- Context menu modal -->
  <div class='modalDialog draggableContainer' id='personNodeContextMenu' style='max-width:30em !important'>
    <div class='modalDialogHeader draggableHeader' style='background: rgb(198, 89, 17)'>
      <span id='personNodeContextMenuHeader'>TBD</span>
      <button class='modalDialogCloseBtn' onclick='ContextMenuHandler.hideMenu()'>✖</button>
    </div>
    <div class='modalDialogBody' style='background:rgb(248, 203, 173)'>
      <div id='expandFamilyTreeButtonContainer' style='width:100%;margin-bottom:10px;display:none'>
	<button id='expandFamilyTreeButton' class='btn grey' style='width:auto;font-size:x-large' title='Add family tree below selected person' onclick='ContextMenuHandler.addSubtree()'>+&#x1f332;</button>
	<label for='expandFamilyTreeButton'>&nbsp;Add tree below selected person</label>
	<p>&nbsp;</p>
      </div>
      <div id='removeFamilyTreeButtonContainer' style='width:100%;margin-bottom:10px;display:none'>
	<button id='removeFamilyTreeButton' class='btn grey' style='width:auto;font-size:x-large' title='Remove family tree below selected person' onclick='ContextMenuHandler.removeSubtree()'>&ndash;&#x1f332;</button>
	<label for='removeFamilyTreeButton'>&nbsp;Remove tree below selected person</label>
	<p>&nbsp;</p>
      </div>
      
      <div>Select a descendant from the list below in order to have the family line to that person added to the display.</div>
      <textarea id='descendantSearchBox'
                style='width:100%; height: 30px; line-height: 30px; overflow: hidden; font-size: 16px; border: 2px solid black; background: white; resize:none; padding: 0 10px; color: black;'
	        placeholder='&#x1F50D; To find a name, start typing here ...'></textarea>
      
      <div id='descendantTableContainer' style='border: 2px solid black; height:20vh; overflow-y:auto;'>
	<table style='background:white;width:100%'>
	  <colgroup><col span='1' style='width:6em;'></col><col span='1' style='width:auto;'></col></colgroup>
	  <tbody></tbody>
	</table>
      </div>
    </div>
  </div> <!-- Context menu. -->

<script src="/js/genealogy.js" type="text/javascript"></script>
<script>
window.onload = function () { InitialisationHandler.onload(); }
window.onresize = function () { PresentationHandler.resize(); }
window.activationEventReceiver = function () { InitialisationHandler.activationReceiver(); }

// ChatGPT suggested that things running in iframes didn't get onresize if the
// frame was resized.  In fact that seems to be wrong, so the following is
// unnecessary.  

//window.addEventListener("message", (event) => {
//    if (event.data === "resized")
//        PresentationHandler.refresh();
//});
  
</script>
</body>
</html>
