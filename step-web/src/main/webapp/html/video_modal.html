<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" onclick=step.util.closeModal("videoModal")>X</button>
</div>
<div id="videomodalbody" class="modal-body" style="text-align:center;background-color:grey">
<p id="pleasewait">Loading video, please wait...</p>
</div>
<script>
    $(document).ready(function () {
        var file = $('#videoModal').data('videofile');
        var time = $('#videoModal').data('videotime') * 1000;
        var gifElement = document.createElement("img");
        var randomString = "";
        if ((typeof performance === "object") && (typeof performance.now() === "number")) {
            randomString = '?' + performance.now();  // GIF file in some browser gets stuck in the last frame after it has played once.
        }
        else randomString = '?' + Math.floor(Math.random() * 10000); 
        gifElement.src = "/images/" + file + randomString;
		gifElement.onload = function() {
			$('#pleasewait').remove();
			$('#videomodalbody').append(gifElement);
			setTimeout(function(){ step.util.closeModal('videoModal') }, time);
		}
    })
</script>
